<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>휴머노이드 격투 경기 관리</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style/index.css" />
</head>
<body>
  <div class="container">
    <header>
      <h1>휴머노이드 격투 경기 관리</h1>
      <span>Stopwatch · 다운/슬립다운 점수</span>
    </header>

    <main>
      <!-- 탭 버튼: 경기 진행 → 경기 결과 → 투표 추첨 -->
      <div class="tabs">
        <button class="tab-btn active" data-tab="match">경기 진행</button>
        <button class="tab-btn" data-tab="results">경기 결과</button>
        <button class="tab-btn" data-tab="vote">투표 추첨</button>
      </div>

      <!-- 경기 진행 탭 -->
      <section class="panel tab-content" data-tab="match">
        <h2>
          경기 진행
          <span class="badge">Referee View</span>
        </h2>

        <!-- 라운드 시간 모드 선택 -->
        <div class="mode-row">
          <span class="mode-label">라운드 시간</span>
          <label class="mode-option">
            <input type="radio" name="roundMode" value="1" />
            1분
          </label>
          <label class="mode-option">
            <input type="radio" name="roundMode" value="2" checked />
            2분
          </label>
        </div>

        <!-- 타이머 -->
        <div class="timer-section">
          <div id="timerDisplay" class="timer-display">00:00.00</div>
          <div class="timer-buttons">
            <button id="startBtn" class="primary">시작 / 재개</button>
            <button id="pauseBtn">일시정지</button>
            <button id="resetBtn" class="danger">리셋</button>
          </div>
        </div>

        <!-- 선수 점수 -->
        <div class="fighters">
          <!-- RED -->
          <div class="fighter red">
            <div class="fighter-header">
              <div style="flex:1">
                <label for="redName">파일럿 이름 (RED)</label>
                <input type="text" id="redName" placeholder="예) 홍길동" value="RED" />
              </div>
              <span class="color-tag red">RED</span>
            </div>

            <div class="score-display">
              <span class="score-label">점수</span>
              <span id="redScore" class="score-value red">0</span>
            </div>

            <div class="score-buttons">
              <button data-fighter="red" data-score="1">다운 +1</button>
              <button data-fighter="red" data-score="0.5">슬립다운 +0.5</button>
              <button data-fighter="red" data-reset="true" class="small">점수 초기화</button>
            </div>
          </div>

          <!-- BLUE -->
          <div class="fighter blue">
            <div class="fighter-header">
              <div style="flex:1">
                <label for="blueName">파일럿 이름 (BLUE)</label>
                <input type="text" id="blueName" placeholder="예) 이순신" value="BLUE" />
              </div>
              <span class="color-tag blue">BLUE</span>
            </div>

            <div class="score-display">
              <span class="score-label">점수</span>
              <span id="blueScore" class="score-value blue">0</span>
            </div>

            <div class="score-buttons">
              <button data-fighter="blue" data-score="1">다운 +1</button>
              <button data-fighter="blue" data-score="0.5">슬립다운 +0.5</button>
              <button data-fighter="blue" data-reset="true" class="small">점수 초기화</button>
            </div>
          </div>
        </div>

        <!-- Undo + 경기 결과 저장 -->
        <div class="row-end">
          <button id="undoBtn" class="small">직전 점수 취소 (Undo)</button>
          <button id="saveMatchBtn" class="primary small">경기 결과 저장</button>
        </div>
      </section>

      <!-- 경기 결과 탭 -->
      <section class="panel tab-content hidden" data-tab="results">
        <h2>
          경기 결과
          <span class="badge">Match Results</span>
        </h2>

        <div class="results-controls">
          <button id="exportMatchesCsvBtn" class="small">CSV로 저장</button>
          <button id="exportMatchesTxtBtn" class="small">TXT로 저장</button>
        </div>

        <div class="results-table-wrap">
          <table class="results-table">
            <thead>
              <tr>
                <th style="width:56px">#</th>
                <th style="width:100px">진행(초)</th>
                <th>RED 이름</th>
                <th style="width:100px">RED 점수</th>
                <th>BLUE 이름</th>
                <th style="width:100px">BLUE 점수</th>
                <th style="width:150px">작업</th>
              </tr>
            </thead>
            <tbody id="matchResultsBody">
              <tr class="empty">
                <td colspan="7">아직 저장된 결과가 없습니다.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- 투표 추첨 탭 -->
      <section class="panel tab-content hidden" data-tab="vote">
        <h2>
          투표 번호 추첨
          <span class="badge">Random Picker</span>
        </h2>

        <div class="vote-config">
          <label for="voteMaxNumber">투표 인원 수</label>
          <div class="vote-config-row">
            <input
              type="number"
              id="voteMaxNumber"
              min="1"
              placeholder="예) 30"
            />
            <button id="voteSetRangeBtn" class="small">범위 설정</button>
          </div>
          <div id="voteRangeInfo" class="vote-range-info">
            현재 범위가 설정되지 않았습니다.
          </div>
        </div>

        <div class="vote-draw">
          <label for="voteName">이름</label>
          <div class="vote-draw-row">
            <input
              type="text"
              id="voteName"
              placeholder="예) 홍길동"
            />
            <button id="voteDrawBtn" class="primary">번호 뽑기</button>
          </div>
          <div id="voteLastResult" class="vote-last-result">
            아직 추첨 결과가 없습니다.
          </div>
        </div>

        <div class="vote-results">
          <div class="vote-results-header">
            <span>추첨 결과 (번호 오름차순)</span>
            <div class="vote-export-buttons">
              <button id="voteExportCsvBtn" class="small">CSV로 저장</button>
              <button id="voteExportTxtBtn" class="small">TXT로 저장</button>
            </div>
          </div>
          <div class="vote-results-list" id="voteResultsList">
            <p class="vote-empty">아직 추첨된 데이터가 없습니다.</p>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <div>브라우저만 있으면 어디서나 사용 가능</div>
      <div class="credit">Made by Geunhyeong Kim, 19th ROBIT Humanoid Team.</div>
    </footer>
  </div>

  <!-- 번호 뽑기 말풍선 오버레이 -->
  <div id="bubbleOverlay" class="bubble-overlay bubble-hidden">
    <div class="bubble">
      <div class="bubble-title">추첨 결과</div>
      <div class="bubble-line"><span id="bubbleName"></span> 님의 번호는</div>
      <div id="bubbleNumber" class="bubble-number">00</div>
      <button id="bubbleOkBtn" class="primary">확인</button>
    </div>
  </div>

  <script src="script/main.js"></script>
</body>
</html>